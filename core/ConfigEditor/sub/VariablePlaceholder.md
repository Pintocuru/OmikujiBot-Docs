## 変数プレースホルダー

### 使用できる箇所

- 各アクションセット ＞ おみくじ設定
	- フキダシ内容
	- WordParty
- プレースホルダー

### 使い方

`{{ 内容 }}` と、波括弧で囲います。

### 使用できるやつ

#### `var` 変数宣言

「変数宣言」は、任意の値を一時的に記憶させておく仕組みです。

- 変数名は、英数字を自由に設定できます。
	- `{{var foo='bar'}}`
	- 変数名の頭文字は英字にしてください（JavaScript の仕様に合わせています）
- 設定した変数は、下記の「予約語」を除き、**ブラウザ (または OBS) を閉じるまで残り続けます**
	- この機能を活用することで「占いランキング」を実現できます。
- 処理の順番は、プレースホルダー → 変数プレースホルダー です。
	- プレースホルダーを下記のように入れると、Foo のプレースホルダーの内容を入れることができます
		- `{{var text='<<Foo>>'}}`
	- 変数名にもプレースホルダーを使用できます
		- `{{var <<userId>>='<<price>>'}}`
- 単体使用で、変数宣言をした値を入れることができます
	- `あなたの運勢は{{text}}`
- 再度 var 宣言することで、値を上書きします
	- `{{var text='Foo'}}{{var text='Bar'}}{{text}}`
	- → `Bar` と入力される

#### `var` の値の評価ルール

`var` の右側に書いた内容は、次のルールで評価されます。

- `'...'` または `"..."` で囲まれたものは **文字列** として扱われます
    - `{{var foo='bar'}}` → `"bar"`
    - 数値のみの場合は、数値として扱われます
- 囲まれてないものは、**変数名として扱われます**
    - `{{var text=score}}`
        - score が存在すれば、その値が入ります
        - 存在しない場合は `"score"` という文字列として扱われます
- rand も使用できます
    - `{{var value=rand(1,100)}}`

#### `var` 予約語

「予約語」は、「ランキング」等のパーツへ、値を届ける仕組みです。

- 予約語は下記の通り
	- `text`,  `symbol`,  `name`,  `variant`,  `unique`,  `slot0～9`
- 予約語の役割は、パーツによって異なります。
	- パーツによっては、使用されない予約語もあります。詳細は各パーツの説明をご覧ください。

#### `rand` ランダム数値

「ランダム数値」は、任意のランダムな数値に置き換えるものです

- 1 つ目の値が最低値、2 つ目の値が最高値です。
	- `{{rand(1,99)}}` とすると、1 から 99 までのうちの、ランダムな数値を返します
	- 数値以外の物が入ると、空が返されます。

#### `calc` 数値の計算

数値を扱う仕組みです。

- 使用できるのは 和差積商
	- `+=`,`-=`,`*=`,`/=`
- 上限・下限は 999,999,999～-999,999,999 まで。それらを超える数値は、丸まります。
	- `{{calc Foo = 5000000000000000}}{{Foo}}円欲しい!!`
	- → `999999999円欲しい!!` と表示されます
	- 小数点も 0.01 までで、それ以下は丸まります。
- 「数値の計算」は、数値や変数を使い計算を行います。
	- 変数に文字列が混入している場合や、存在しない場合は 0 として扱います。
- rand も使用できます
	- `{{calc Foo += rand(0,100)}}`
- 再度使用した場合、その値を引き継ぎます
	- `{{calc score += 10}}{{calc score += rand(0,100)}}{{score}}`
	- 10 + 0～100 のランダムな数値が入る

