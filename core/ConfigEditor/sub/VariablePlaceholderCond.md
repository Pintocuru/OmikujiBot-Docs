# 追加実装案：`cond` 条件分岐関数の提案

## 概要

`rand` 関数と同様の構文で使用できる条件分岐関数 `cond` を追加実装します。これにより、複雑な条件分岐を簡潔に記述でき、コードの可読性と保守性が大幅に向上します。

## 実装の必要性

### 現在の課題

1. **条件分岐が存在しない**
2. **表現力の制限**

### 解決策

`rand(最小値, 最大値)` と同様の直感的な構文で条件分岐を実現する `cond` 関数を追加します。

## 仕様提案

### 基本構文

```javascript
{{cond(条件式, 真の場合の値, 偽の場合の値)}}
```

### 使用例

```javascript
// 基本使用
{{cond(score > 100, '合格', '不合格')}}

// 変数代入
{{var result=cond(age >= 20, '成人', '未成年')}}

// 数値計算との組み合わせ
{{var price=1000}}
{{var discount_price=price * cond(is_member, 0.8, 1.0)}}
```

### チェーン対応（オプション）

```javascript
// 複数条件のネスト
{{var grade=cond(score >= 90, 'A',
          cond(score >= 80, 'B',
          cond(score >= 70, 'C',
          cond(score >= 60, 'D', 'F'))))}}
```

## 実装詳細

### 技術的実現性

1. **既存システムとの互換性が高い**
    
    - `rand` 関数と同様のパーサーを流用可能
    - 既存の変数参照システムをそのまま使用
        
2. **実装コストが低い**
    
    - 基本実装：約 25-30 行程度
    - チェーン対応追加：約 10 行程度
    - 合計：最大 40 行程度の新規コード
        
3. **既存機能との統合が容易**
    
    - `var`、`calc`、`rand` との併用が可能
    - 既存のエラーハンドリングを流用

### 実装ステップ

1. **Phase 1: 基本機能**
    - 単一の `cond` 関数実装
    - 基本的な比較演算子（`>`, `<`, `>=`, `<=`, `==`）対応
        
2. **Phase 2: チェーン対応（オプション）**
    - ネストした `cond` の評価対応
    - 再帰的パーサーの拡張
        
3. **Phase 3: 拡張機能（将来検討）**
    - 論理演算子（`&&`, `||`）対応
    - 型変換の最適化