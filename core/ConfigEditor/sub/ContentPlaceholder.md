## プレースホルダー

メッセージ内で動的に内容を変化させるための機能です。

### プレースホルダー を使用できる箇所

- **おみくじ設定**: フキダシ内容、WordParty
- **定義済みプレースホルダー**: 登録する値（テキスト）の中

### 1. インライン・ランダム選択

個別の設定を作らずに、その場で簡易的なランダム抽選を行いたい場合に使用します。

- 各選択肢をシングルクォート `' '` で囲み、カンマ `,` で区切ります。
    - `<<'値1','値2','値3'>>`
- 重み付け（出現比率）の設定はできません。均等な確率で抽選されます。
- 選択肢の中に、さらに別のプレースホルダーを含めることができます。
	- `<<'あら？<<user>>さん、初見かしら？','<<user>>さん、また会えたわね！'>>`

### 2. 定義済みプレースホルダー

管理画面の「プレースホルダー」エディターで設定します。複雑な抽選や再帰的な展開が可能です。 パッケージ構成によっては、エディター機能が含まれない場合があります。

- キー名は、「プレースホルダー」の基本設定 > キーの名前を変更する から確認できます。
	- `<<Foo>>`
	- 英数字のみ。大文字・小文字を厳密に区別します。
- プレースホルダーの中に、更にプレースホルダーを入れることができます。最大 10 階層まで繰り返し展開します。
    - 設定画面から各値の出現確率（重み）を調整できます。
    - 循環参照（自分自身を呼び出す等）が発生した場合、処理は自動的に停止します。

### プレースホルダーの 予約語

**※注意※** 定義済みプレースホルダーで下記の予約語と同じ「キー名」を作成した場合、**予約語の機能は上書きされ、自作の設定が優先されます。**

#### 共通（コメントルール・タイマールール）

- `<<viewer>>` 現在の同時接続視聴者数
- `<<upVote>>` 高評価数（対応プラットフォームのみ）
- `<<commenter>>` 配信内でコメントした累計ユニークユーザー数
- `<<winner>>` コメントしたユーザーの中からランダムに選ばれた 1 名の名前

#### コメントルールのみ

タイマールールで稼働すると、空文字が返ってきます。

- `<<user>>` ユーザー名
	- わんコメでニックネームが付けられている場合、その名前が優先されます
- `<<userId>>` ユーザーID
	- わんコメの設定で「除外ユーザー」などで指定できる文字列です
- `<<price>>` ギフト金額
	- メンバーシップなど、金額が付かないものは `0` と表示されます。
- `<<lc>>` 配信全体でのコメント通し番号
- `<<tc>>` そのユーザーの累計コメント数
- `<<draws>>` 該当する「おみくじ」をそのユーザーが引いた回数
